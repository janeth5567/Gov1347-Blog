---
title: 'Week 5: Ads and Campaigns'
author: Janet Hernandez
date: '2022-10-10'
slug: []
categories: []
tags: []
summary: 
---
# Ads and Campaigns #

```{r}

library(tidyverse)
library(ggplot2)
library(readr)
library(scales)
library(plotly)
library(rjson)
library(jtools)
library(htmlwidgets)
library(reactable)

WMP_house_gen_2018_ads_cleaned <- readRDS("~/Downloads/WMP_house_gen_2018_ads_cleaned (1).rds")
   

spending_bydistrict_2018 <- read.csv("~/Desktop/Gov1347 Data/Gov1347 Projects/Gov1347-Blog/2018_spending_by_district.csv")

#Load data just for year 2018 
house_party_vote_share_by_district <- read_csv("~/Desktop/Syllabi for Fall 22/election analytics/Gov1347 Data/house party vote share by district 1948-2020.csv") %>%
  filter(raceYear == 2018) %>%
  select(State, raceYear, Area, RepVotesMajorPercent, DemVotesMajorPercent, st_fips, state_abb, CD, district_num, district_id, WinnerParty )

# Change from at large states w only one district to a code-able suffix
house_party_vote_share_by_district$CD[grep(pattern = "-AL", x = house_party_vote_share_by_district$CD)] <- c("AK-01","DE-01","MT-01","ND-01","SD-01", "VT-01","WY-01")

#Cleaned 2018 data from Ethan  
ratings_share_2018 <-read.csv("~/Desktop/2018_ratings.csv")

house_party_vote_share_by_district <- house_party_vote_share_by_district %>%  
  inner_join(ratings_share_2018, by = "CD") %>%
  rename(DISTRICT = district_num, STATENAME = State) %>%
  mutate(DISTRICT = as.character(DISTRICT),
         diff = avg_margin - RepVotesMajorPercent)

house_votes_2018 <- house_party_vote_share_by_district

```

Figure out a way to incorporate the spending data by district level to my model on prediction

first update my model with district level data on polling and economic variables then add spending 

```{r, setup and load}
RDI_quarterly <- read.csv("~/Desktop/Gov1347 Data/Gov1347 Projects/Section data 2/RDI_quarterly.csv")
economy <- read.csv("~/Desktop/Gov1347 Data/Gov1347 Projects/Section data 2/GDP_quarterly.csv")
popvote_df <- read.csv("~/Desktop/Gov1347 Data/Gov1347 Projects/Section data 2/house_popvote_seats.csv")
unemployment_national_quarterly_final <- read.csv("~/Desktop/Gov1347 Data/Gov1347 Projects/Section data 2/unemployment_national_quarterly_final.csv")


## Altering model to be just q4 bc i realized it makes more sense to do q4 data bc closer to elect. 

economy_q4 <- economy %>% 
  filter(quarter_yr == 4) 

RDI_q4 <- RDI_quarterly %>%
  filter(quarter_yr == 4)

unemployment_q4 <- unemployment_national_quarterly_final %>%
  filter(quarter_yr == 4)

economy_model_data <- popvote_df %>% 
  inner_join(economy_q4, by = "year")

economy_model_data <-economy_model_data %>% 
  inner_join(RDI_q4, by = "year")

national_model_data <-economy_model_data %>% 
  inner_join(unemployment_q4, by = "year")

```

```{r state model data }



```


