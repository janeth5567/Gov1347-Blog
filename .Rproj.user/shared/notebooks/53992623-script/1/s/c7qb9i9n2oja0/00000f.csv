"0","# Building TERRIBLE models"
"0","models <- train_data %>% "
"0","  mutate(model = map(data, ~lm(dem_votes_major_percent ~ avg_rating, "
"0","                                  data = .x))) %>% "
"0","  select(-data)"
"0",""
"0","# Extracting TERRIBLE model results"
"0","model_results <- models %>% "
"0","  mutate(r_squared = map_dbl(model, ~summary(.x)$r.squared))"
"0",""
"0","# Predicting 2022 with a TERRIBLE model"
"0","pred_2022 <- test_data %>%"
"0","  # inner join as there may not be historical models for some districts"
"0","  inner_join(models, by = c(""state"", ""district"")) %>% "
"0","  mutate(pred = map_dbl(.x = model, .y = data, ~predict(object = .x, newdata = as.data.frame(.y)))) %>%"
"0","  select(state, district, pred)"
"2","Warning: prediction from a rank-deficient fit may be misleading"
