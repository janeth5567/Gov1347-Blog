"0",""
"0","SeatDat = read_csv(""~/Desktop/Syllabi for Fall 22/election analytics/Gov1347 Data/house nationwide vote and seat share by party 1948-2020.csv"") %>%"
"0"," rename(ElectionDate = year )"
"0","RDIDat = read.csv(""~/Downloads/A229RX0.csv"")"
"0","CongPollDat <- read.csv(""~/Downloads/GenericPolls1942_2020.csv"") %>%"
"0"," rename(ElectionDate = year )"
"0",""
"0","RDIDat = RDIDat %>%"
"0","  mutate(Year = as.numeric(str_split(RDIDat$DATE,""-"",simplify=T)[,1]),"
"0","         Month = as.numeric(str_split(RDIDat$DATE,""-"",simplify=T)[,2]),"
"0","         ElectionYear = ifelse(Year %% 2 == 0,1,0),"
"0","         Q2 = ifelse(Month == 4 & ElectionYear==0,1,0),"
"0","         Q4 = ifelse(Month == 10 & ElectionYear==0,1,0),"
"0","         Q6 = ifelse(Month == 4 & ElectionYear==1,1,0),"
"0","         Q7 = ifelse(Month == 7 & ElectionYear==1,1,0),"
"0","         Q8 = ifelse(Month == 10&ElectionYear==1,1,0))%>%"
"0","  mutate(ElectionDate = as.numeric(ifelse(ElectionYear==1,Year,Year+1)),"
"0","  )%>%"
"0","  select(A229RX0,ElectionYear,ElectionDate,Q2,Q4,Q6,Q7,Q8)"
"0",""
"0",""
"0",""
"0","RDIDat.Q2 = RDIDat%>%"
"0","  filter(Q2==1)%>%"
"0","  select(ElectionDate,A229RX0)%>%"
"0","  rename(RDI.Q2 = A229RX0 )"
"0","RDIDat.Q4 = RDIDat%>%"
"0","  filter(Q4==1)%>%"
"0","  select(ElectionDate,A229RX0)%>%"
"0","  rename(RDI.Q4 = A229RX0 )"
"0","RDIDat.Q6 = RDIDat%>%"
"0","  filter(Q6==1)%>%"
"0","  select(ElectionDate,A229RX0)%>%"
"0","  rename(RDI.Q6 = A229RX0 )"
"0","RDIDat.Q7 = RDIDat%>%"
"0","  filter(Q7==1)%>%"
"0","  select(ElectionDate,A229RX0)%>%"
"0","  rename(RDI.Q7 = A229RX0 )"
"0","RDIDat.Q8 = RDIDat%>%"
"0","  filter(Q8==1)%>%"
"0","  select(ElectionDate,A229RX0)%>%"
"0","  rename(RDI.Q8 = A229RX0 )"
"0",""
"0",""
"0","RDIDat =  left_join(RDIDat.Q2,RDIDat.Q4,"
"0","                   by = 'ElectionDate')%>%"
"0","          left_join(RDIDat.Q6,"
"0","                     by = 'ElectionDate')%>%"
"0","          left_join(RDIDat.Q7,"
"0","                     by = 'ElectionDate')%>%"
"0","          left_join(RDIDat.Q8,"
"0","                   by = 'ElectionDate')%>% "
"0","#  mutate(RDI.change.Q4.Q8 = ((RDI.Q8-RDI.Q4)/RDI.Q4)*100,"
"0"," #        RDI.change.Q2.Q8 = ((RDI.Q8-RDI.Q2)/RDI.Q2)*100,"
"0","#         RDI.change.Q2.Q6 = ((RDI.Q6-RDI.Q2)/RDI.Q2)*100,"
"0"," #        RDI.change.Q7.Q8 = ((RDI.Q8-RDI.Q7)/RDI.Q7)*100)"
"0","  ##below is Achen and Bartel's coding of RDI changes"
"0","  mutate(RDI.change.Q4.Q8 = (log(RDI.Q8)-log(RDI.Q4))*100,"
"0","         RDI.change.Q2.Q8 = (log(RDI.Q8)-log(RDI.Q2))*100,"
"0","         RDI.change.Q2.Q6 = (log(RDI.Q6)-log(RDI.Q2))*100,"
"0","         RDI.change.Q7.Q8 = (log(RDI.Q8)-log(RDI.Q7))*100)"
"0",""
"0",""
"0",""
"0","  "
"0",""
"0","forecast.dat = left_join(SeatDat,RDIDat,"
"0","                by = 'ElectionDate')"
"0",""
"0",""
"0","presidents = tribble("
"0","  ~ElectionDate, ~incumbent, ~PresParty, ~midterm, ~incumbent.tenure, "
"0","  1960, 'Eisenhower', 'Republican', 0, 8,"
"0","  1962, 'Kennedy', 'Democrat',1, 2, "
"0","  1964, 'Johnson', 'Democrat',0, 4,"
"0","  1966, 'Johnson', 'Democrat',1,6,"
"0","  1968, 'Johson', 'Democrat',0,8,"
"0","  1970, 'Nixon', 'Republican',1,2,"
"0","  1972, 'Nixon', 'Republican',0,4,"
"0","  1974, 'Ford', 'Republican',1,6, "
"0","  1976, 'Ford', 'Republican',0,8,"
"0","  1978, 'Carter', 'Democrat',1,2,"
"0","  1980, 'Carter', 'Democrat',0,4,"
"0","  1982, 'Reagan', 'Republican',1,2, "
"0","  1984, 'Reagan', 'Republican',0,4,"
"0","  1986, 'Reagan', 'Republican',1,6,"
"0","  1988, 'Reagan', 'Republican',0,8,"
"0","  1990, 'HWBush', 'Republican',1,10,"
"0","  1992, 'HWBush', 'Republican',0,12,"
"0","  1994, 'Clinton', 'Democrat',1,2,"
"0","  1996, 'Clinton', 'Democrat',0,4,"
"0","  1998, 'Clinton', 'Democrat',1,6,"
"0","  2000, 'Clinton', 'Democrat',0,8,"
"0","  2002, 'WBush', 'Republican',1,2,"
"0","  2004, 'WBush', 'Republican',0,4,"
"0","  2006, 'WBush', 'Republican',1,6,"
"0","  2008, 'WBush', 'Republican',0,8,"
"0","  2010, 'Obama', 'Democrat',1,2,"
"0","  2012, 'Obama', 'Democrat',0,4,"
"0","  2014, 'Obama', 'Democrat',1,6,"
"0","  2016, 'Obama', 'Democrat',0,8,"
"0","  2018, 'Trump', 'Republican',1,2,"
"0","  2020, 'Trump', 'Republican',0,4"
"0",")"
"0",""
"0","forecast.dat = left_join(forecast.dat,presidents,"
"0","                by = ""ElectionDate"")"
"0",""
"0","forecast.dat = left_join(forecast.dat,CongPollDat,"
"0","                by = ""ElectionDate"")"
"0",""
"0","forecast.dat = forecast.dat%>%"
"0","  mutate(DemSeatLoss = D_seats - lag(D_seats, default = first(D_seats)),"
"0","         RepSeatLoss = R_seats - lag(R_seats, default = first(R_seats)),"
"0","         RepSeatPct = R_seats/(R_seats + D_seats + Other_seats),"
"0","         DemSeatPct = D_seats/(R_seats + D_seats + Other_seats),"
"0","         IncSeatLoss = ifelse(PresParty == 'Democrat',DemSeatLoss,RepSeatLoss),"
"0","         IncSeatAdvantage = ifelse(PresParty == 'Democrat',D_seats - R_seats, R_seats - D_seats),"
"0","         IncVotePct = ifelse(PresParty == 'Democrat',D_majorvote_pct, R_majorvote_pct),"
"0","         IncVoteAdvantage = ifelse(PresParty == 'Democrat',D_majorvote_pct-R_majorvote_pct, R_majorvote_pct-D_majorvote_pct),"
"0","         IncSeatPct = round(ifelse(PresParty == 'Democrat',DemSeatPct, RepSeatPct),4)*100,"
"0","         IncSeatPctAdvantage = round(ifelse(PresParty == 'Democrat',DemSeatPct-RepSeatPct, RepSeatPct-DemSeatPct),4)*100,"
"0","         IncPartyCongress = ifelse(lag(RepSeatPct,default = first(RepSeatPct))>.5,'Republican','Democrat'),"
"0","         IncCongressSeatLoss = ifelse(IncPartyCongress == 'Democrat',DemSeatLoss,RepSeatLoss),"
"0","         IncCongressSeatAdvantage = ifelse(IncPartyCongress == 'Democrat',D_seats-R_seats,R_seats-D_seats),"
"0","          IncCongressSeatPctAdvantage = round(ifelse(IncPartyCongress == 'Democrat',DemSeatPct-RepSeatPct, RepSeatPct-DemSeatPct),4)*100,"
"0","         IncCongressVotePct = ifelse(IncPartyCongress == 'Democrat',D_majorvote_pct, R_majorvote_pct),"
"0","         IncCongressVoteAdvantage = ifelse(IncPartyCongress == 'Democrat',D_majorvote_pct-R_majorvote_pct,R_majorvote_pct-D_majorvote_pct),"
"0","         PresPartyGenericAdvantage = ifelse(PresParty == 'Democrat',GenericDem-GenericRep,GenericRep-GenericDem),"
"0","         IncCongressGenericAdvantage = ifelse(IncPartyCongress == 'Democrat',GenericDem-GenericRep,GenericRep-GenericDem))"
"1","[1m[33mError[39m in `mutate()`:[22m
[38;5;232m[33m![38;5;232m Problem while computing `PresPartyGenericAdvantage = ifelse(...)`.[39m
[1mCaused by error in `ifelse()`:[22m
[33m![39m object 'GenericDem' not found
Backtrace:
[90m 1. [39mforecast.dat %>% ...
[90m 7. [39m[1mbase[22m::ifelse(...)
"
